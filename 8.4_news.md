# PHP 8.4 news

PHP 8.4 Ä‘Ã£ Ä‘Æ°á»£c phÃ¡t hÃ nh vÃ o ngÃ y 21 thÃ¡ng 11 nÄƒm 2024.
PhiÃªn báº£n nÃ y sáº½ bao gá»“m cÃ¡c property hooks, há»— trá»£ HTML 5 cÅ©ng nhÆ° cÃ¡c phÆ°Æ¡ng thá»©c ná»‘i tiáº¿p mÃ  new khÃ´ng cáº§n thÃªm dáº¥u ngoáº·c Ä‘Æ¡n â€” vÃ  nhiá»u thay Ä‘á»•i lá»›n!

DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ tÃ­nh nÄƒng chÃ­nh mÃ  tÃ´i tÃ³m táº¯t Ä‘Æ°á»£c

---

## Property hooks

CÃ¡c Property hooks Ä‘Æ°á»£c láº¥y cáº£m há»©ng tá»« cÃ¡c ngÃ´n ngá»¯ nhÆ° Kotlin, C# vÃ  Swift.
Property hooks sáº½ giÃºp loáº¡i bá» máº«u cá»§a cÃ¡c phÆ°Æ¡ng thá»©c get vÃ  set thuá»™c tÃ­nh, cho phÃ©p thuá»™c tÃ­nh xÃ¡c Ä‘á»‹nh quyá»n truy cáº­p vÃ  cáº­p nháº­t báº±ng hook.

```php
<?php

class User
{
    public function __construct(
        public string $firstName,
        public string $lastName
    ) {}

    public string $fullName {
        // Override the "read" action with arbitrary logic.
        get => "{$this->firstName} {$this->lastName}";

        // Override the "write" action with arbitrary logic.
        set {
            [$this->firstName, $this->lastName] = explode(' ', $value, 2);
        }
    }

    public function getName()
    {
        return 
    }
}

$user1 = new User('tea', 'my');
echo $user1->fullName; // tea my

$user1->fullName = 'TrÃ  My';
echo $user1->firstName; // TrÃ 
echo $user1->lastName; // My
```

---

## Asymmetric Visibility - Kháº£ nÄƒng hiá»ƒn thá»‹ khÃ´ng Ä‘á»‘i xá»©ng

Báº¯t Ä‘áº§u tá»« PHP 8.4, cÃ¡c thuá»™c tÃ­nh cÅ©ng cÃ³ thá»ƒ cÃ³ kháº£ nÄƒng hiá»ƒn thá»‹ cá»§a chÃºng Ä‘Æ°á»£c thiáº¿t láº­p khÃ´ng Ä‘á»‘i xá»©ng vá»›i pháº¡m vi Ä‘á»c vÃ  ghi khÃ¡c nhau.

CÃº phÃ¡p cá»§a sáº½ nhÆ° sau:

```php
{read visibility} {set visibility}(set) {propertyType} $name;
```

VÃ­ dá»¥:

```php
<?php

class Book
{
    public function __construct(
        public private(set) string $title,
        public protected(set) string $author,
        protected private(set) int $publicYear,
    ) {}
}

$b = new Book('PHP news', 'Tm', 2024);

echo $b->title; // PHP news
echo $b->author; // Tm
echo $b->publicYear; // Fatal error: Uncaught Error: Cannot access protected property Book::$publicYear in ...
echo $b->title = "Php 8.4 news"; // Fatal error: Uncaught Error: Cannot modify private(set) property Book::$title from global scope in...
```

Do $title vÃ  #publicYear Ä‘Æ°á»£c define lÃ  private(set) nÃªn nÃ³ chá»‰ Ä‘Æ°á»£c phÃ©p ghi trong chÃ­nh class Book.
CÃ¡c phÆ°Æ¡ng thá»©c con vÃ  instance khi ghi Ä‘Ã¨ sáº½ dáº«n Ä‘áº¿n má»™t Fatal error

```php

class SpecialBook extends Book
{
    public function updateAuthor(string $author): void
    {
        $this->author = $author;
    }

    public function updatePublicYear(int $year): void
    {
        $this->publicYear = $year;
    }
}

$a = new SpecialBook('PHP news', 'Tm', 2024);
$a->updateAuthor('abc');
echo $a->author; // abc
$a->updatePublicYear(2025); // Fatal error: Uncaught Error: Cannot modify private(set) property Book::$ from scope SpecialBook in ...
```

Asymmetric Visibility pháº£i tuÃ¢n theo cÃ¡c quy táº¯c sau:

1. Náº¿u khÃ´ng cung cáº¥p kháº£ nÄƒng hiá»ƒn thá»‹ khi Ä‘á»c thÃ¬ máº·c Ä‘á»‹nh sáº½ lÃ  public.
2. Set (ghi) kháº£ nÄƒng hiá»ƒn thá»‹ luÃ´n Ä‘Æ°á»£c theo sau bá»Ÿi chuá»—i "(set)"
3. Kháº£ nÄƒng hiá»ƒn thá»‹ khi ghi PHáº¢I báº±ng hoáº·c Ã­t hiá»ƒn thá»‹ hÆ¡n kháº£ nÄƒng hiá»ƒn thá»‹ khi Ä‘á»c
4. Khi káº¿t há»£p vá»›i cÃ¡c hook thuá»™c tÃ­nh, kháº£ nÄƒng hiá»ƒn thá»‹ sáº½ Ã¡p dá»¥ng cho cÃ¡c hook get vÃ  set tÆ°Æ¡ng á»©ng.
5. Asymmetric Visibility yÃªu cáº§u thuá»™c tÃ­nh pháº£i cÃ³ khai bÃ¡o kiá»ƒu dá»¯ liá»‡u.

---

## #[\Deprecated] Attribute

PHP 8.4 giá»›i thiá»‡u má»™t tÃ­nh nÄƒng má»›i lÃ  #[\Deprecated] Attribute, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘Ã¡nh dáº¥u cÃ¡c class, hÃ m, phÆ°Æ¡ng thá»©c hoáº·c thuá»™c tÃ­nh lÃ  khÃ´ng nÃªn sá»­ dá»¥ng ná»¯a (deprecated).
TÃ­nh nÄƒng nÃ y giÃºp cáº£i thiá»‡n quÃ¡ trÃ¬nh báº£o trÃ¬ mÃ£ nguá»“n báº±ng cÃ¡ch cung cáº¥p cáº£nh bÃ¡o táº¡i thá»i Ä‘iá»ƒm cháº¡y mÃ  khÃ´ng cáº§n sá»­ dá»¥ng PHPDoc hoáº·c cÃ¡c phÆ°Æ¡ng phÃ¡p thá»§ cÃ´ng khÃ¡c.

Trong php < 8.4, ta pháº£i sá»­ dá»¥ng cÃº phÃ¡p @deprecated trong PHPDoc nhÆ° sau:

```php
<?php

class ExampleClass {
    /**
     * @deprecated 1.0.0 No longer used by internal code and not recommended
     */
    public function deprecatedMethod() {
        echo "This is the deprecated method.";
    }
}

$a = new ExampleClass();
$a->deprecatedMethod();
```

VÃ­ dá»¥ trÃªn sáº½ giÃºp cÃ¡c editor hiá»ƒn thá»‹ má»™t cáº£nh bÃ¡o ráº±ng function bá»‹ Ä‘Ã¡nh dáº¥u lÃ  deprecated ká»ƒ tá»« phiÃªn báº£n 1.0.0, cÃ³ thá»ƒ bá»‹ xoÃ¡ á»Ÿ cÃ¡c phiÃªn báº£n sau vÃ  sáº½ khÃ´ng Ä‘Æ°á»£c khuyáº¿n khÃ­ch sá»­ dá»¥ng ná»¯a.

Tuy nhiÃªn, khi code Ä‘Æ°á»£c cháº¡y, sáº½ khÃ´ng cÃ³ báº¥t cá»© cáº£nh bÃ¡o nÃ o Ä‘Æ°á»£c báº¯n ra(xem hÃ¬nh bÃªn dÆ°á»›i).
![alt text](./images/deprecated-method.png)
Trong php >= 8.4, ta lÃ m nhÆ° sau:

```php
<?php

class ExampleClass {
    #[\Deprecated(
        message: "This method is no longer used by internal code and not recommended",
        since: "1.0.0",
    )]
    public function deprecatedMethod() {
        echo "This is the deprecated method.";
    }
}

$a = new ExampleClass();
$a->deprecatedMethod();
```

Editor cÅ©ng sáº½ hiá»ƒn thá»‹ cáº£nh bÃ¡o giá»‘ng nhÆ° á»Ÿ phiÃªn báº£n php < 8.4.
Tuy nhiÃªn, khi code Ä‘Æ°á»£c thá»±c thi, má»™t cáº£nh bÃ¡o lá»—i vá»›i level E_USER_DEPRECATED sáº½ Ä‘Æ°á»£c báº¯n ra.

```text
Deprecated: Method ExampleClass::deprecatedMethod() is deprecated since 1.0.0, This method is no longer used by internal code and not recommended in /Users/manh.nguyen3/Work/test-php-8.4.1.php on line 14
This is the deprecated method.
```

---

## TÃ­nh nÄƒng ext-dom má»›i vÃ  há»— trá»£ HTML5

Máº·c dÃ¹ HTML 5 Ä‘Ã£ ra Ä‘á»i hÆ¡n tá»« nÄƒm 2008, nhÆ°ng PHP chÆ°a bao giá» cÃ³ há»— trá»£ phÃ¹ há»£p cho nÃ³.
PHP cÃ³ \DOMDocument, vá» máº·t lÃ½ thuyáº¿t sáº½ há»— trá»£ HTML 4, nhÆ°ng nÃ³ khÃ´ng thá»±c sá»± tÆ°Æ¡ng thÃ­ch vá»›i HTML 4 ná»¯a.

Äá»ƒ kháº¯c phá»¥c nhá»¯ng Ä‘iá»ƒm ká»³ quáº·c nÃ y: PHP 8.4 Ä‘ang bá»• sung trÃ¬nh phÃ¢n tÃ­ch cÃº phÃ¡p tÆ°Æ¡ng thÃ­ch vá»›i HTML 5!

Xem chi tiáº¿t táº¡i [bÃ i viáº¿t nÃ y](https://stitcher.io/blog/html-5-in-php-84).

---

## Object API cho BCMath

PHP 8.4 giá»›i thiá»‡u Object API cho BCMath, má»™t cÃ¡ch má»›i Ä‘á»ƒ lÃ m viá»‡c vá»›i cÃ¡c phÃ©p toÃ¡n sá»‘ há»c chÃ­nh xÃ¡c cao (arbitrary precision) thÃ´ng qua cÃ¡c Ä‘á»‘i tÆ°á»£ng thay vÃ¬ chá»‰ sá»­ dá»¥ng cÃ¡c hÃ m nhÆ° trÆ°á»›c Ä‘Ã¢y.
Äiá»u nÃ y giÃºp mÃ£ trá»Ÿ nÃªn hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, dá»… Ä‘á»c vÃ  quáº£n lÃ½ hÆ¡n, Ä‘áº·c biá»‡t trong cÃ¡c á»©ng dá»¥ng phá»©c táº¡p.

Xem thÃªm táº¡i [Rfc nÃ y](https://wiki.php.net/rfc/support_object_type_in_bcmath).

---

## ThÃªm cÃ¡c hÃ m má»›i cho array

CÃ¡c hÃ m má»›i:

- [array_find](https://www.php.net/manual/en/function.array-find.php)(array $array, callable $callback): mixed - Tráº£ vá» pháº§n tá»­ Ä‘áº§u tiÃªn thá»a mÃ£n hÃ m callback
- [array_find_key](https://www.php.net/manual/en/function.array-find-key.php)(array $array, callable $callback): mixed - Tráº£ vá» khÃ³a cá»§a pháº§n tá»­ Ä‘áº§u tiÃªn thá»a mÃ£n hÃ m callback
- [array_any](https://www.php.net/manual/en/function.array-any.php)(array $array, callable $callback): mixed - Kiá»ƒm tra xem cÃ³ Ã­t nháº¥t má»™t pháº§n tá»­ máº£ng thá»a mÃ£n hÃ m callback hay khÃ´ng
- [array_all](https://www.php.net/manual/en/function.array-all.php)(array $array, callable $callback): mixed - Kiá»ƒm tra xem táº¥t cáº£ cÃ¡c pháº§n tá»­ máº£ng cÃ³ thá»a mÃ£n hÃ m callback khÃ´ng

---

## PDO driver specific subclasses

Trong PHP 8.4, tÃ­nh nÄƒng PDO Driver-Specific Subclasses Ä‘Æ°á»£c giá»›i thiá»‡u nháº±m tÄƒng tÃ­nh rÃµ rÃ ng vÃ  há»— trá»£ Ä‘áº·c thÃ¹ khi lÃ m viá»‡c vá»›i cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u qua PDO (PHP Data Objects).
Thay vÃ¬ sá»­ dá»¥ng lá»›p chung PDO, cÃ¡c driver (nhÆ° MySQL, SQLite, PostgreSQL) cÃ³ cÃ¡c lá»›p con riÃªng biá»‡t, giÃºp truy cáº­p cÃ¡c phÆ°Æ¡ng thá»©c hoáº·c tÃ­nh nÄƒng Ä‘áº·c trÆ°ng cá»§a tá»«ng driver má»™t cÃ¡ch an toÃ n vÃ  rÃµ rÃ ng hÆ¡n.

TrÆ°á»›c PHP 8.4, PDO cung cáº¥p má»™t API chung cho táº¥t cáº£ cÃ¡c driver cÆ¡ sá»Ÿ dá»¯ liá»‡u.
DÃ¹ cÃ¡c driver há»— trá»£ cÃ¡c tÃ­nh nÄƒng Ä‘áº·c thÃ¹, báº¡n váº«n pháº£i sá»­ dá»¥ng lá»›p chung PDO, dáº«n Ä‘áº¿n viá»‡c thiáº¿u gá»£i Ã½ tá»« IDE hoáº·c gáº·p lá»—i runtime khi gá»i cÃ¡c phÆ°Æ¡ng thá»©c khÃ´ng há»— trá»£.

```php
$pdo = new PDO('mysql:host=localhost;dbname=test', 'user', 'password');

// KhÃ´ng rÃµ driver nÃ o Ä‘Æ°á»£c sá»­ dá»¥ng
$pdo->getAttribute(PDO::ATTR_DRIVER_NAME);
```

Tá»« PHP 8.4, PDO giá»›i thiá»‡u cÃ¡c lá»›p con Ä‘áº·c thÃ¹ tÆ°Æ¡ng á»©ng vá»›i tá»«ng driver, cháº³ng háº¡n:

- PDO\Dblib
- PDO\Firebird
- PDO\MySQL
- PDO\Odbc
- PDO\Pgsql
- PDO\SQLite

Äiá»u nÃ y giÃºp:

- Gá»£i Ã½ phÆ°Æ¡ng thá»©c Ä‘áº·c thÃ¹ cá»§a driver tá»« IDE.
- An toÃ n hÆ¡n khi lÃ m viá»‡c vá»›i cÃ¡c tÃ­nh nÄƒng chá»‰ há»— trá»£ bá»Ÿi má»™t driver cá»¥ thá»ƒ.

---

## new MyClass()->method() khÃ´ng cÃ³ dáº¥u ngoáº·c Ä‘Æ¡n

VÃ¬ member access trong quÃ¡ trÃ¬nh khá»Ÿi táº¡o Ä‘Ã£ Ä‘Æ°á»£c giá»›i thiá»‡u, báº¡n pháº£i Ä‘Ã³ng gÃ³i lá»‡nh new MyClass() trong dáº¥u ngoáº·c Ä‘Æ¡n, náº¿u khÃ´ng báº¡n sáº½ gáº·p lá»—i phÃ¢n tÃ­ch cÃº phÃ¡p.
CÃº phÃ¡p Ä‘Æ°á»£c Ä‘á» xuáº¥t sáº½ cho phÃ©p báº¡n truy cáº­p cÃ¡c háº±ng sá»‘, thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c mÃ  khÃ´ng cáº§n thÃªm dáº¥u ngoáº·c Ä‘Æ¡n:

```php
class PhpVersion
{
    public function getVersion(): string
    {
        return 'PHP 8.4';
    }
}
// php < 8.4 
var_dump((new PhpVersion())->getVersion());

// php >= 8.4 
var_dump(new PhpVersion()->getVersion());
```

Báº£n cáº­p nháº­t nÃ y sá»­a lá»—i papercut giÃºp viá»‡c truy cáº­p thÃ nh viÃªn lá»›p trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n, khÃ´ng cáº§n pháº£i thÃªm dáº¥u ngoáº·c Ä‘Æ¡n bao quanh hoáº·c sá»­ dá»¥ng phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o tÄ©nh.
Thay Ä‘á»•i cÃº phÃ¡p nÃ y cÅ©ng giÃºp PHP phÃ¹ há»£p hÆ¡n vá»›i cÃ¡c ngÃ´n ngá»¯ C khÃ¡c nhÆ° Java, C# vÃ  TypeScript, vá»‘n khÃ´ng yÃªu cáº§u dáº¥u ngoáº·c Ä‘Æ¡n bao quanh.

## Lazy Objects

Lazy Objects - má»™t cáº£i tiáº¿n giÃºp tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t vÃ  quáº£n lÃ½ bá»™ nhá»› báº±ng cÃ¡ch trÃ¬ hoÃ£n viá»‡c khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng cho Ä‘áº¿n khi nÃ³ thá»±c sá»± cáº§n Ä‘Æ°á»£c sá»­ dá»¥ng.
Äiá»u nÃ y Ä‘áº·c biá»‡t há»¯u Ã­ch trong cÃ¡c á»©ng dá»¥ng lá»›n, nÆ¡i mÃ  má»™t sá»‘ Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng ngay láº­p tá»©c hoáº·c tháº­m chÃ­ khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng trong suá»‘t quÃ¡ trÃ¬nh thá»±c thi.

### Lazy Objects lÃ  gÃ¬?

- **Lazy Object**: LÃ  má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c "Ä‘áº¡i diá»‡n" bá»Ÿi má»™t proxy (lazy proxy).
Proxy nÃ y sáº½ trÃ¬ hoÃ£n viá»‡c khá»Ÿi táº¡o thá»±c táº¿ cá»§a Ä‘á»‘i tÆ°á»£ng gá»‘c cho Ä‘áº¿n khi má»™t thuá»™c tÃ­nh hoáº·c phÆ°Æ¡ng thá»©c cá»§a nÃ³ Ä‘Æ°á»£c truy cáº­p.
- GiÃºp giáº£m chi phÃ­ tÃ i nguyÃªn ban Ä‘áº§u khi khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng.

### **Lá»£i Ã­ch cá»§a Lazy Objects**

1. **TÄƒng hiá»‡u suáº¥t**:

- Giáº£m chi phÃ­ khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng trong cÃ¡c trÆ°á»ng há»£p mÃ  Ä‘á»‘i tÆ°á»£ng khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng ngay.
- TrÃ¬ hoÃ£n viá»‡c khá»Ÿi táº¡o Ä‘áº¿n khi thá»±c sá»± cáº§n thiáº¿t.

2. **Tá»‘i Æ°u bá»™ nhá»›**:

- CÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng cáº§n thiáº¿t sáº½ khÃ´ng tiÃªu tá»‘n tÃ i nguyÃªn bá»™ nhá»› ngay láº­p tá»©c.

3. **TÃ­ch há»£p dá»… dÃ ng**:

- Lazy Objects hoáº¡t Ä‘á»™ng mÃ  khÃ´ng yÃªu cáº§u thay Ä‘á»•i lá»›n trong mÃ£ nguá»“n hiá»‡n táº¡i.

---

## **CÃ¡ch sá»­ dá»¥ng Lazy Objects trong PHP 8.4**

### **Khá»Ÿi táº¡o má»™t Lazy Object**

Sá»­ dá»¥ng hÃ m tÄ©nh **`LazyObject::createLazy()`** Ä‘á»ƒ táº¡o má»™t Lazy Object.

VÃ­ dá»¥:

```php
use LazyObject\LazyObject;

class HeavyObject {
    public function __construct() {
        echo "Khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng náº·ng...\n";
        sleep(3); // Giáº£ láº­p khá»Ÿi táº¡o lÃ¢u
    }

    public function doSomething() {
        echo "Thá»±c hiá»‡n cÃ´ng viá»‡c...\n";
    }
}

// Táº¡o má»™t Lazy Object
$lazyObject = LazyObject::createLazy(HeavyObject::class);

// KhÃ´ng khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng cho Ä‘áº¿n khi cáº§n thiáº¿t
$lazyObject->doSomething(); // LÃºc nÃ y Ä‘á»‘i tÆ°á»£ng má»›i thá»±c sá»± Ä‘Æ°á»£c khá»Ÿi táº¡o
```

**Káº¿t quáº£:**

```text
Khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng náº·ng...
Thá»±c hiá»‡n cÃ´ng viá»‡c...
```

---

### **NguyÃªn táº¯c hoáº¡t Ä‘á»™ng**

1. **Táº¡o Proxy**:
   - Khi gá»i `LazyObject::createLazy()`, PHP táº¡o má»™t proxy thay tháº¿ cho Ä‘á»‘i tÆ°á»£ng tháº­t.

2. **Khá»Ÿi táº¡o trÃ¬ hoÃ£n**:
   - Proxy sáº½ khÃ´ng khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng tháº­t cho Ä‘áº¿n khi má»™t thuá»™c tÃ­nh hoáº·c phÆ°Æ¡ng thá»©c cá»§a nÃ³ Ä‘Æ°á»£c truy cáº­p.

3. **Minh báº¡ch**:
   - Lazy Object hoáº¡t Ä‘á»™ng giá»‘ng nhÆ° Ä‘á»‘i tÆ°á»£ng tháº­t tá»« quan Ä‘iá»ƒm cá»§a láº­p trÃ¬nh viÃªn. KhÃ´ng cáº§n thay Ä‘á»•i logic á»©ng dá»¥ng.

---

### **Háº¡n cháº¿**

1. **KhÃ´ng há»— trá»£ cÃ¡c thuá»™c tÃ­nh `readonly` hoáº·c `final`**:
   - Lazy Objects khÃ´ng hoáº¡t Ä‘á»™ng tá»‘t vá»›i cÃ¡c thuá»™c tÃ­nh hoáº·c lá»›p sá»­ dá»¥ng `readonly` hoáº·c `final`.

2. **TÃ­nh phá»©c táº¡p vá»›i Reflection**:
   - Reflection cÃ³ thá»ƒ khÃ´ng hoáº¡t Ä‘á»™ng nhÆ° mong Ä‘á»£i vá»›i cÃ¡c Lazy Objects vÃ¬ proxy Ä‘Æ°á»£c sá»­ dá»¥ng thay cho Ä‘á»‘i tÆ°á»£ng gá»‘c.

3. **KhÃ´ng dÃ nh cho táº¥t cáº£ cÃ¡c trÆ°á»ng há»£p**:
   - Lazy Objects chá»‰ thá»±c sá»± há»¯u Ã­ch khi viá»‡c khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng tiÃªu tá»‘n tÃ i nguyÃªn vÃ  Ä‘á»‘i tÆ°á»£ng khÃ´ng cháº¯c cháº¯n sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng.

---

### **á»¨ng dá»¥ng thá»±c táº¿**

1. **Äá»‘i tÆ°á»£ng náº·ng trong á»©ng dá»¥ng lá»›n**:
   - VÃ­ dá»¥: Káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u, API bÃªn thá»© ba hoáº·c xá»­ lÃ½ tá»‡p lá»›n.

2. **Tá»‘i Æ°u hÃ³a framework**:
   - Trong cÃ¡c framework lá»›n (Laravel, Symfony, ...), Lazy Objects giÃºp trÃ¬ hoÃ£n viá»‡c khá»Ÿi táº¡o cÃ¡c dá»‹ch vá»¥ hoáº·c thÃ nh pháº§n khÃ´ng cáº§n thiáº¿t.

3. **Cáº£i thiá»‡n hiá»‡u suáº¥t trong mÃ´i trÆ°á»ng Ä‘a luá»“ng hoáº·c concurrent**:
   - TrÃ¡nh viá»‡c khá»Ÿi táº¡o dÆ° thá»«a, giÃºp cáº£i thiá»‡n tÃ i nguyÃªn CPU vÃ  RAM.

## Táº¡o DateTime tá»« Unix Timestamp

Viá»‡c táº¡o DateTime tá»« Unix Timestamp sáº½ thuáº­n tiá»‡n hÆ¡n trong PHP 8.4, vá»›i phÆ°Æ¡ng thá»©c createFromTimestamp() má»›i.
NÃ³ sáº½ há»— trá»£ cáº£ Unix Timestamp thÃ´ng thÆ°á»ng cÅ©ng nhÆ° dáº¥u thá»i gian chá»©a micro giÃ¢y:

```php
$dt = DateTimeImmutable::createFromTimestamp(1718337072);
$dt->format('Y-m-d'); // 2024-06-14

$dt = DateTimeImmutable::createFromTimestamp(1718337072.432);
$dt->format('Y-m-d h:i:s.u'); // 2024-06-14 03:51:12.432000
```

## CÃ¡c hÃ m mb_* má»›i

PHP Ä‘Ã£ cÃ³ cÃ¡c hÃ m trim, ltrim, rtrim, ucfirst vÃ  lcfirst trong má»™t thá»i gian dÃ i vÃ  hiá»‡n táº¡i trong PHP 8.4, nÃ³ bá»• sung thÃªm mb_, há»— trá»£ chuá»—i nhiá»u byte cho cÃ¡c hÃ m Ä‘Ã³.

- mb_trim()
- mb_ltrim()
- mb_rtrim()
- mb_ucfirst()
- mb_lcfirst()

Táº¥t cáº£ Ä‘á»u mang cÃ¹ng Ä‘á»‘i sá»‘ nhÆ° cÃ¡c hÃ m gá»‘c.
CÃ¡c hÃ m nÃ y Ä‘áº¿n tá»« hai RFC riÃªng biá»‡t: [rfc:mb_trim](https://wiki.php.net/rfc/mb_trim) vÃ  [rfc:mb_ucfirst](https://wiki.php.net/rfc/mb_ucfirst).

## New JIT implementation based on IR Framework

JIT Compiler (Just-In-Time) lÃ  má»™t tÃ­nh nÄƒng trong Zend Engine, Ä‘Æ°á»£c giá»›i thiá»‡u tá»« PHP 8.0. Ká»ƒ tá»« PHP 8.4, php sáº½ Ä‘Æ°á»£c dá»±a trÃªn IR Framework(Intermediate Representation Framework) giÃºp tá»‘i Æ°u hoÃ¡ hiá»‡u suáº¥t, bá»™ nhá»› vÃ  kiáº¿n trÃºc dá»… má»Ÿ rá»™ng hÆ¡n.

## HÃ m [request_parse_body](https://php.watch/versions/8.4/request_parse_body) má»›i

ThÃªm hÃ m request_parse_body() cho phÃ©p phÃ¢n tÃ­ch cÃº phÃ¡p cÃ¡c yÃªu cáº§u RFC1867 (nhiá»u pháº§n) trong cÃ¡c yÃªu cáº§u HTTP khÃ´ng pháº£i POST.

## TÃ¬m hiá»ƒu thÃªm

Äá»ƒ náº¯m báº¯t nhanh cÃ¡c tÃ­nh nÄƒng má»›i nÃ y, hÃ£y xem trang [ThÃ´ng bÃ¡o phÃ¡t hÃ nh PHP 8.4.0](https://www.php.net/releases/8.4/en.php) Ä‘á»ƒ biáº¿t cÃ¡c vÃ­ dá»¥ trÆ°á»›c/sau PHP 8.4.
HÃ£y nhá»› xem cÃ¡c lá»—i khÃ´ng cÃ²n Ä‘Æ°á»£c sá»­ dá»¥ng ná»¯a vÃ  cÃ¡c lá»—i tÆ°Æ¡ng thÃ­ch ngÆ°á»£c.

## Káº¿t luáº­n:

Vá»›i nhá»¯ng thay Ä‘á»•i Ä‘Ã¡ng ká»ƒ nÃ y, PHP 8.4 liá»‡u ráº±ng cÃ³ Ä‘Ã¡ng Ä‘á»ƒ nÃ¢ng cáº¥p hay khÃ´ng.
CÃ¡c báº¡n hÃ£y comment vÃ  nÃªu Ã½ kiáº¿n cá»§a mÃ¬nh á»Ÿ Ä‘Ã¢y nhÃ©.

NgoÃ i ra, tÃ´i cÃ²n tá»•ng há»£p má»™t sá»‘ thay Ä‘á»•i tá»« phiÃªn báº£n php 5.6 Ä‘áº¿n php 8 [táº¡i Ä‘Ã¢y](https://github.dev/ntm-dev/php_news) vÃ  Ä‘ang dáº§n Ä‘Æ°á»£c hoÃ n thiá»‡n. Mong cÃ¡c báº¡n gÃ³p Ã½ ğŸ¥°

## Nguá»“n tham kháº£o

- https://www.php.net/releases/8.4/en.php
- https://laravel-news.com/php-8-4-0
